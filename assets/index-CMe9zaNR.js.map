{"version":3,"file":"index-CMe9zaNR.js","sources":["../../src/js/api.js","../../src/js/tabs.js"],"sourcesContent":["export async function fetchTeams() {\r\n  const res = await fetch(\"https://63ee0ec0388920150dd83e3c.mockapi.io/teams\");\r\n  const data = await res.json();\r\n  return data;\r\n}\r\nexport function splitHomeAway(teams) {\r\n  return {\r\n    home: teams.map((team) => ({\r\n      ...team,\r\n      points: Math.floor(team.points * 0.6),\r\n    })),\r\n    away: teams.map((team) => ({\r\n      ...team,\r\n      points: Math.floor(team.points * 0.4),\r\n    })),\r\n  };\r\n}\r\n","import { fetchTeams, splitHomeAway } from \"./api\";\r\n\r\nlet cachedTables = { general: false, home: false, away: false };\r\n\r\nconst renderTable = async (type, targetTable) => {\r\n  const data = await fetchTeams();\r\n  let grouped = {};\r\n\r\n  if (type === \"home\" || type === \"away\") {\r\n    const split = splitHomeAway(data);\r\n    const selected = split[type];\r\n    selected.forEach((team) => {\r\n      if (!grouped[team.group]) grouped[team.group] = [];\r\n      grouped[team.group].push(team);\r\n    });\r\n  } else {\r\n    data.forEach((team) => {\r\n      if (!grouped[team.group]) grouped[team.group] = [];\r\n      grouped[team.group].push(team);\r\n    });\r\n  }\r\n\r\n  targetTable.innerHTML = \"\";\r\n\r\n  const headers = [\r\n    `<span class=\"header-full\">Игры</span><span class=\"header-short\">И</span>`,\r\n    `<span class=\"header-full\">В</span><span class=\"header-short\">В</span>`,\r\n    `<span class=\"header-full\">Н</span><span class=\"header-short\">Н</span>`,\r\n    `<span class=\"header-full\">П</span><span class=\"header-short\">П</span>`,\r\n    `<span class=\"header-full\">З-П</span><span class=\"header-short\">З-П</span>`,\r\n    `<span class=\"header-full\">Форма</span>`,\r\n    `<span class=\"header-full\">Очки</span><span class=\"header-short\">О</span>`,\r\n  ];\r\n\r\n  const icons = {\r\n    W: `<svg class=\"icon-td\">\r\n            <use href=\"/sport-tables/symbol-defs.svg#icon-Frame9428\" />\r\n          </svg>`,\r\n    D: `<svg class=\"icon-td\">\r\n            <use href=\"/sport-tables/symbol-defs.svg#icon-Frame9401\" />\r\n          </svg>`,\r\n    L: `<svg class=\"icon-td\">\r\n            <use href=\"/sport-tables/symbol-defs.svg#icon-Frame9425\" />\r\n          </svg>`,\r\n  };\r\n\r\n  Object.entries(grouped).forEach(([groupName, teams]) => {\r\n    teams.sort((a, b) => b.points - a.points);\r\n    const table = document.createElement(\"table\");\r\n    table.classList.add(\"group-table\", `group-${groupName}`);\r\n\r\n    const thead = `<thead>\r\n    <tr class=\"head-tabl\">\r\n      <th class=\"group-th\" colspan=\"3\">ГРУПА ${groupName}</th>\r\n      ${headers\r\n        .map((h, index) => `<th class=\"tabl-${index}\">${h}</th>`)\r\n        .join(\"\")}\r\n    </tr>\r\n  </thead>`;\r\n    const rows = teams\r\n      .map((t, index) => {\r\n        const formHtml = t.form.map((letter) => icons[letter]).join(\" \");\r\n        const rankClass =\r\n          index + 1 === 1\r\n            ? \"first\"\r\n            : index + 1 === 2\r\n            ? \"second\"\r\n            : index + 1 === 3\r\n            ? \"third\"\r\n            : \"last\";\r\n\r\n        return `<tr>\r\n        <td class=\"first-td\"> <span class=\"rank-td ${rankClass}\">${\r\n          index + 1\r\n        }<span class=\"tooltip\">Лига чемпионов</span></span></td>\r\n          <td class=\"logo-td\"><img src=\"${t.logo}\" alt=\"${t.name.charAt(\r\n          0\r\n        )}\" width=\"30\" /></td>\r\n          <td class=\"team-name-td\">${t.name}</td>\r\n          <td class=\"games-td\">${t.games}</td>\r\n          <td class=\"wins-td\">${t.wins}</td>\r\n          <td class=\"draws-td\">${t.draws}</td>\r\n          <td class=\"loses-td\">${t.loses}</td>\r\n          <td class=\"score-td\">${t.scored}-${t.conceded}</td>\r\n          <td class=\"form-td\">${formHtml}</td>\r\n          <td class=\"points-td\">${t.points}</td>\r\n        </tr>`;\r\n      })\r\n      .join(\"\");\r\n\r\n    table.innerHTML = thead + `<tbody>${rows}</tbody>`;\r\n    targetTable.appendChild(table);\r\n  });\r\n\r\n  cachedTables[type] = true;\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\r\n  const generalTab = document.querySelector('.tab[data-type=\"general\"]');\r\n  generalTab.classList.add(\"active\");\r\n\r\n  const generalTable = document.getElementById(\"general-table\");\r\n  if (!cachedTables.general) {\r\n    await renderTable(\"general\", generalTable);\r\n  }\r\n\r\n  generalTable.classList.remove(\"hidden\");\r\n\r\n  const tabs = document.querySelectorAll(\".tab\");\r\n  tabs.forEach((tab) => {\r\n    tab.addEventListener(\"click\", async () => {\r\n      tabs.forEach((t) => t.classList.remove(\"active\"));\r\n      tab.classList.add(\"active\");\r\n\r\n      const type = tab.dataset.type;\r\n      const targetTable = document.getElementById(`${type}-table`);\r\n\r\n      if (!cachedTables[type]) {\r\n        await renderTable(type, targetTable);\r\n      }\r\n\r\n      document.querySelectorAll(\".table-wrapper\").forEach((table) => {\r\n        table.classList.add(\"hidden\");\r\n      });\r\n\r\n      targetTable.classList.remove(\"hidden\");\r\n    });\r\n  });\r\n});\r\n"],"names":["fetchTeams","splitHomeAway","teams","team","cachedTables","renderTable","type","targetTable","data","grouped","headers","icons","groupName","a","b","table","thead","h","index","rows","t","formHtml","letter","generalTable","tabs","tab"],"mappings":"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"}